(function(e){function t(t){for(var s,o,i=t[0],l=t[1],r=t[2],d=0,f=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(c,o)&&c[o]&&f.push(c[o][0]),c[o]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);u&&u(t);while(f.length)f.shift()();return a.push.apply(a,r||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],s=!0,i=1;i<n.length;i++){var l=n[i];0!==c[l]&&(s=!1)}s&&(a.splice(t--,1),e=o(o.s=n[0]))}return e}var s={},c={app:0},a=[];function o(t){if(s[t])return s[t].exports;var n=s[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=s,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(n,s,function(t){return e[t]}.bind(null,s));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var r=0;r<i.length;r++)t(i[r]);var u=l;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0fad":function(e,t,n){},1:function(e,t){},10:function(e,t){},11:function(e,t){},12:function(e,t){},13:function(e,t){},14:function(e,t){},2:function(e,t){},"24b5":function(e,t,n){},3:function(e,t){},3243:function(e,t,n){},4:function(e,t){},4678:function(e,t,n){var s={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function c(e){var t=a(e);return n(t)}function a(e){if(!n.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}c.keys=function(){return Object.keys(s)},c.resolve=a,e.exports=c,c.id="4678"},5:function(e,t){},"56c0":function(e,t,n){"use strict";n("24b5")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var s=n("7a23"),c=n("7338"),a=n.n(c),o={class:"btn"},i=Object(s["g"])("h3",null,"管理班表",-1),l={key:0,disabled:"",class:"button buttonupload"},r=Object(s["g"])("h3",{class:"uploading"},"上傳中...",-1),u=Object(s["g"])("i",{class:"fas fa-spinner"},null,-1),d={key:1,id:"authButton",class:"button"},f=Object(s["g"])("h3",null,"新增到Google行事曆",-1),b=Object(s["g"])("h3",null,"新增到Google行事曆",-1),g={class:"sucess_pop",id:"sucess_pop"},p={class:"sucess_pop_in"},h={class:"card"},j=Object(s["g"])("h1",null,"上傳完成 !",-1),m={class:"button"};function O(e,t,n,c,a,O){var y=Object(s["n"])("myheader"),v=Object(s["n"])("calendar"),w=Object(s["n"])("editbar");return Object(s["i"])(),Object(s["c"])(s["a"],null,[Object(s["g"])(y,{googleAPI:a.googleAPI,haslogin:a.haslogin,username:a.username},null,8,["googleAPI","haslogin","username"]),Object(s["g"])("main",null,[Object(s["g"])(v,{onEvent:O.updateevent,haslogin:a.haslogin},null,8,["onEvent","haslogin"]),Object(s["g"])(w,{onUpdateguide:O.getguidenum,onUpdateedit:O.closeedit,haslogin:a.haslogin,guide:a.guide,mobileedit:a.mobileedit},null,8,["onUpdateguide","onUpdateedit","haslogin","guide","mobileedit"])]),Object(s["g"])("div",{class:["space",{spaceon:a.mobileedit}]},null,2),Object(s["g"])("div",o,[Object(s["g"])("button",{id:"mobileshiftbtn",class:"button mbtn",onClick:t[1]||(t[1]=function(){return O.manage&&O.manage.apply(O,arguments)})},[i]),!0===a.upload?(Object(s["i"])(),Object(s["c"])("button",l,[r,u])):!1===a.upload?(Object(s["i"])(),Object(s["c"])("button",d,[f])):Object(s["d"])("",!0),Object(s["s"])(Object(s["g"])("button",{id:"addButton",class:"button",onClick:t[2]||(t[2]=function(){return O.execute&&O.execute.apply(O,arguments)})},[b],512),[[s["q"],3===a.upload]])]),Object(s["g"])("div",g,[Object(s["g"])("div",p,[Object(s["g"])("div",h,[j,Object(s["s"])(Object(s["g"])("h2",null,"登入帳號，可以紀錄班表跟班別哦 !",512),[[s["q"],!1===a.haslogin]]),Object(s["g"])("div",m,[Object(s["s"])(Object(s["g"])("button",{class:"btn_sign",onClick:t[3]||(t[3]=function(){return O.opensignup&&O.opensignup.apply(O,arguments)})},"還沒有帳號，先註冊",512),[[s["q"],!1===a.haslogin]]),Object(s["s"])(Object(s["g"])("button",{class:"btn_log",onClick:t[4]||(t[4]=function(){return O.openlogin&&O.openlogin.apply(O,arguments)})},"登入",512),[[s["q"],!1===a.haslogin]]),Object(s["s"])(Object(s["g"])("button",{class:"btn_log",onClick:t[5]||(t[5]=function(){return O.close&&O.close.apply(O,arguments)})},"關閉視窗",512),[[s["q"],a.haslogin]])])])])])],64)}n("99af"),n("d81d"),n("b0c0"),n("d3b7"),n("ac1f"),n("25f0"),n("1276");var y=Object(s["t"])("data-v-096b0f9d");Object(s["k"])("data-v-096b0f9d");var v=Object(s["e"])('<div class="title" data-v-096b0f9d><a href="./index.html" data-v-096b0f9d><h1 class="firstwords" data-v-096b0f9d> Happy  </h1><h1 class="secwords" data-v-096b0f9d> Shifts  </h1><h1 class="thirdwords" data-v-096b0f9d> 班表管理 </h1></a></div>',1),w={class:"user"},k=Object(s["g"])("h2",null,"註冊",-1),_=Object(s["g"])("h2",null,"登入",-1),S=Object(s["g"])("h2",null,"登出",-1),A={class:"member_pop_in"},q={class:"card log"},x=Object(s["g"])("i",{class:"far fa-times-circle"},null,-1),C=Object(s["g"])("h1",null,"登入",-1),I={class:"user"},$={class:"pass signup_pass"},T={class:"button"},L=Object(s["f"])("Login "),P=Object(s["g"])("br",{class:"mb_br"},null,-1),z=Object(s["f"])(" with Google"),M={key:1,disabled:"",class:"btn_log btn_gray"},E=Object(s["f"])("登入中"),U=Object(s["g"])("i",{class:"fas fa-spinner"},null,-1),B={key:3,disabled:"",class:"btn_log btn_gray"},D=Object(s["f"])("登入中"),N=Object(s["g"])("i",{class:"fas fa-spinner"},null,-1),V={class:"card sign"},G=Object(s["g"])("i",{class:"far fa-times-circle"},null,-1),K=Object(s["g"])("h1",null,"註冊",-1),H={class:"pass"},F={class:"repass"},J={class:"button"},Z=Object(s["f"])("Sign up "),Y=Object(s["g"])("br",{class:"mb_br"},null,-1),R=Object(s["f"])(" with Google"),W={key:1,disabled:"",class:"btn_log btn_gray"},Q=Object(s["f"])("註冊中"),X=Object(s["g"])("i",{class:"fas fa-spinner"},null,-1),ee={key:3,disabled:"",class:"btn_log btn_gray"},te=Object(s["f"])("註冊中"),ne=Object(s["g"])("i",{class:"fas fa-spinner"},null,-1);Object(s["j"])();var se=y((function(e,t,n,c,a,o){return Object(s["i"])(),Object(s["c"])(s["a"],null,[Object(s["g"])("header",null,[v,Object(s["g"])("nav",null,[Object(s["s"])(Object(s["g"])("div",w,[Object(s["g"])("h2",null,"登入: "+Object(s["o"])(n.username),1)],512),[[s["q"],n.haslogin]]),Object(s["s"])(Object(s["g"])("div",{class:"sign memberbtn",onClick:t[1]||(t[1]=function(e){return o.open("signup")})},[k],512),[[s["q"],!1===n.haslogin]]),Object(s["s"])(Object(s["g"])("div",{class:"log memberbtn",onClick:t[2]||(t[2]=function(e){return o.open("login")})},[_],512),[[s["q"],!1===n.haslogin]]),Object(s["s"])(Object(s["g"])("div",{class:"memberbtn",onClick:t[3]||(t[3]=function(){return o.logout&&o.logout.apply(o,arguments)})},[S],512),[[s["q"],n.haslogin]])])]),Object(s["g"])("div",{class:["member_pop",{on:a.pop}]},[Object(s["g"])("div",A,[Object(s["s"])(Object(s["g"])("div",q,[Object(s["g"])("a",{onClick:t[4]||(t[4]=function(){return o.close&&o.close.apply(o,arguments)})},[x]),C,Object(s["g"])("span",I,[Object(s["s"])(Object(s["g"])("input",{type:"text",name:"username_log",class:"input","onUpdate:modelValue":t[5]||(t[5]=function(e){return a.input_login.username=e}),placeholder:a.lg_guide.user},null,8,["placeholder"]),[[s["p"],a.input_login.username]])]),Object(s["g"])("span",$,[Object(s["s"])(Object(s["g"])("input",{type:"password",name:"username_pwd",class:"input","onUpdate:modelValue":t[6]||(t[6]=function(e){return a.input_login.password=e}),placeholder:a.lg_guide.pwd},null,8,["placeholder"]),[[s["p"],a.input_login.password]])]),Object(s["g"])("div",T,[a.isgooglelogin?(Object(s["i"])(),Object(s["c"])("button",{key:0,class:"btn_log google",onClick:t[7]||(t[7]=function(e){return o.googlelogin("login")})},[L,P,z])):!1===a.isgooglelogin?(Object(s["i"])(),Object(s["c"])("button",M,[E,U])):Object(s["d"])("",!0),a.islogin?(Object(s["i"])(),Object(s["c"])("button",{key:2,class:"btn_log",onClick:t[8]||(t[8]=function(){return o.login&&o.login.apply(o,arguments)})},"登入")):!1===a.islogin?(Object(s["i"])(),Object(s["c"])("button",B,[D,N])):Object(s["d"])("",!0)])],512),[[s["q"],"login"===a.pop_card]]),Object(s["s"])(Object(s["g"])("div",V,[Object(s["g"])("a",{onClick:t[9]||(t[9]=function(){return o.close&&o.close.apply(o,arguments)})},[G]),K,Object(s["g"])("span",{class:["user signup_user",{error:a.usernamehasaccount}]},[Object(s["s"])(Object(s["g"])("input",{type:"text",name:"signup_username",class:"input","onUpdate:modelValue":t[10]||(t[10]=function(e){return a.input_signup.username=e}),placeholder:a.su_guide.user,onKeyup:t[11]||(t[11]=function(e){return o.checkuser(a.input_signup.username)}),onClick:t[12]||(t[12]=function(){return o.clearerror&&o.clearerror.apply(o,arguments)})},null,40,["placeholder"]),[[s["p"],a.input_signup.username]])],2),Object(s["g"])("span",H,[Object(s["s"])(Object(s["g"])("input",{type:"password",name:"signup_pass",class:"input","onUpdate:modelValue":t[13]||(t[13]=function(e){return a.input_signup.password=e}),placeholder:a.su_guide.pwd,onClick:t[14]||(t[14]=function(){return o.clearerror&&o.clearerror.apply(o,arguments)})},null,8,["placeholder"]),[[s["p"],a.input_signup.password]])]),Object(s["g"])("span",F,[Object(s["s"])(Object(s["g"])("input",{type:"password",name:"signup_repass",class:"input","onUpdate:modelValue":t[15]||(t[15]=function(e){return a.input_signup.repassword=e}),placeholder:a.su_guide.repwd,onClick:t[16]||(t[16]=function(){return o.clearerror&&o.clearerror.apply(o,arguments)})},null,8,["placeholder"]),[[s["p"],a.input_signup.repassword]])]),Object(s["g"])("div",J,[a.isgooglesignup?(Object(s["i"])(),Object(s["c"])("button",{key:0,class:"btn_log google",onClick:t[17]||(t[17]=function(e){return o.googlelogin("signup")})},[Z,Y,R])):!1===a.isgooglesignup?(Object(s["i"])(),Object(s["c"])("button",W,[Q,X])):Object(s["d"])("",!0),a.issignup?(Object(s["i"])(),Object(s["c"])("button",{key:2,class:"btn_log",onClick:t[18]||(t[18]=function(){return o.signup&&o.signup.apply(o,arguments)})},"送出")):!1===a.issignup?(Object(s["i"])(),Object(s["c"])("button",ee,[te,ne])):Object(s["d"])("",!0)])],512),[[s["q"],"signup"===a.pop_card]])])],2)],64)})),ce=n("0934"),ae={name:"myheader",props:["googleAPI","haslogin","username"],data:function(){return{usernamehasaccount:!1,pop:!1,pop_card:null,lg_guide:{user:"",pwd:""},su_guide:{user:"請輸入英文和數字，至少5個字元",pwd:"請輸入至少8個字元，包含大小寫",repwd:""},input_login:{username:"",password:"",hide:""},input_signup:{id:null,username:"",password:"",repassword:"",hide:""},isgooglelogin:!0,islogin:!0,isgooglesignup:!0,issignup:!0}},methods:{open:function(e){this.pop=!0,this.pop_card=e},close:function(){this.pop=!1},login:function(){var e=this;e.islogin=!1,document.querySelector(".signup_pass").classList.remove("error"),e.input_login.hide=ce.MD5(e.input_login.password).toString(),a.a.post("/api/login",this.input_login).then((function(t){console.log(t.data),0!=t.data?window.location.reload():(document.querySelector(".signup_pass").classList.add("error"),e.islogin=!0)})).catch((function(e){console.log(e)}))},googlelogin:function(e){var t=this,n=t.googleAPI.CLIENT_ID,s=t.googleAPI.API_KEY,c=window.gapi,o={response_type:"token",client_id:n,immediate:!1,scope:["https://www.googleapis.com/auth/userinfo.email","https://www.googleapis.com/auth/userinfo.profile"]};function i(n){n&&n["access_token"]&&(c.auth.setToken(n),console.log(n),"login"===e?t.isgooglelogin=!1:t.isgooglesignup=!1,l())}function l(){return c.client.setApiKey(s),c.client.load("https://www.googleapis.com/discovery/v1/apis/people/v1/rest").then((function(){console.log("GAPI client loaded for API"),r()}),(function(e){console.error("Error loading GAPI client for API",e)}))}function r(){c.client.people.people.get({resourceName:"people/me",personFields:"names,phoneNumbers,emailAddresses,addresses,residences,genders,birthdays,occupations"}).then((function(e){var t={username:e.result.emailAddresses[0].value};a.a.post("/api/googlelogin",t).then((function(e){console.log(e),1===e.data&&window.location.reload()})).catch((function(e){console.log(e),alert("登入錯誤 !")}))}))}c.load("client:auth2",(function(){c.auth2.init({client_id:n})})),c.auth.authorize(o,i)},checkuser:function(e){var t=this;t.usernamehasaccount=!1,document.querySelector(".signup_user").classList.remove("error"),a.a.post("/api/checkuser",{username:e}).then((function(e){1===e.data.length&&(t.usernamehasaccount=!0)})).catch((function(e){console.log(e)}))},signup:function(){var e=this;function t(){if(/^(?=.*[a-z])(?=.*[0-9])[a-zA-Z0-9]{5,}$/.test(e.input_signup.username))return console.log("帳號正確"),!0;document.querySelector('input[name="signup_username"]').classList.add("error"),e.input_signup.username=""}function n(){if(/^(?=.*[a-z])(?=.*[A-Z])[a-zA-Z0-9]{8,}$/.test(e.input_signup.password))return console.log("密碼正確"),!0;document.querySelector('input[name="signup_pass"]').classList.add("error"),e.input_signup.password=""}function s(){if(e.input_signup.password===e.input_signup.repassword&&""!==e.input_signup.repassword)return console.log("確認密碼正確"),!0;document.querySelector('input[name="signup_repass"]').classList.add("error"),e.su_guide.repwd="確認密碼錯誤",e.input_signup.repassword=""}!0===t()&!0===n()&!0===s()&&!1===e.usernamehasaccount&&(e.issignup=!1,console.log("sucsess"),e.input_signup.hide=ce.MD5(e.input_signup.password).toString(),a.a.post("/api/signup",e.input_signup).then((function(e){console.log(e),window.location.reload()})).catch((function(e){console.log(e)})))},clearerror:function(e){e.target.classList.remove("error"),e.target===document.querySelector('input[name="signup_repass"]')&&(this.su_guide.repwd="")},logout:function(){a.a.delete("/api/session").then((function(e){console.log(e),window.location.reload()})).catch((function(e){console.log(e)}))}},mounted:function(){var e=this;this.$bus.$on("openlogin",(function(t){e.pop=t.pop,e.pop_card=t.pop_card})),this.$bus.$on("opensignup",(function(t){e.pop=t.pop,e.pop_card=t.pop_card}))}};n("d4c7");ae.render=se,ae.__scopeId="data-v-096b0f9d";var oe=ae,ie=(n("fb6a"),Object(s["t"])("data-v-d5cfd9c0"));Object(s["k"])("data-v-d5cfd9c0");var le={class:"calendar"},re={class:"monthrow"},ue=Object(s["g"])("i",{class:"fas fa-arrow-left"},null,-1),de={class:"monthyear"},fe=Object(s["g"])("i",{class:"fas fa-arrow-right"},null,-1),be={class:"weeksrow"},ge={class:"guide guide2"},pe=Object(s["g"])("span",{class:"arrow"},"🡅",-1),he=Object(s["f"])(" 可以點擊選擇指定的日期哦 ! "),je=Object(s["g"])("p",null,"知道了",-1);Object(s["j"])();var me=ie((function(e,t,n,c,a,o){var i=Object(s["n"])("cdays");return Object(s["i"])(),Object(s["c"])("div",le,[Object(s["g"])("table",null,[Object(s["g"])("thead",null,[Object(s["g"])("tr",re,[Object(s["g"])("td",{class:"changeM",onClick:t[1]||(t[1]=function(){return o.prevMonth&&o.prevMonth.apply(o,arguments)})},[ue]),Object(s["g"])("td",de,Object(s["o"])(a.year)+"年"+Object(s["o"])(a.month)+"月",1),Object(s["g"])("td",{class:"changeM",onClick:t[2]||(t[2]=function(e){return o.nextMonth()})},[fe])]),Object(s["g"])("tr",be,[(Object(s["i"])(!0),Object(s["c"])(s["a"],null,Object(s["m"])(a.weeks,(function(e,t){return Object(s["i"])(),Object(s["c"])("td",{key:t,class:"weeks"},Object(s["o"])(e),1)})),128)),(Object(s["i"])(!0),Object(s["c"])(s["a"],null,Object(s["m"])(a.weeks,(function(e,t){return Object(s["i"])(),Object(s["c"])("td",{key:t,class:"weeksmobile"},Object(s["o"])(e.slice(2,3)),1)})),128))])]),Object(s["g"])("tbody",null,[(Object(s["i"])(!0),Object(s["c"])(s["a"],null,Object(s["m"])(a.days,(function(e,t){return Object(s["i"])(),Object(s["c"])(i,{key:t,day:e,shifts:a.shifts[t],onUpdate:o.updateindex},null,8,["day","shifts","onUpdate"])})),128)),Object(s["s"])(Object(s["g"])("div",ge,[pe,he,Object(s["g"])("button",{class:"btn",onClick:t[3]||(t[3]=function(){return o.iknow&&o.iknow.apply(o,arguments)})},[je])],512),[[s["q"],2===a.guide]])])])])})),Oe=(n("a434"),Object(s["t"])("data-v-25a49c9a"));Object(s["k"])("data-v-25a49c9a");var ye={class:"daysrow"},ve={class:"shiftsrow"},we=Object(s["g"])("br",null,null,-1);Object(s["j"])();var ke=Oe((function(e,t,n,c,a,o){return Object(s["i"])(),Object(s["c"])(s["a"],null,[Object(s["g"])("tr",ye,[(Object(s["i"])(!0),Object(s["c"])(s["a"],null,Object(s["m"])(n.day,(function(e,n){return Object(s["i"])(),Object(s["c"])("td",{class:"days",key:n,onClick:function(t){return o.selectdate(e)},onMouseover:t[1]||(t[1]=function(){return o.hover&&o.hover.apply(o,arguments)}),onMouseout:t[2]||(t[2]=function(){return o.hoverout&&o.hoverout.apply(o,arguments)})},Object(s["o"])(e),41,["onClick"])})),128))]),Object(s["g"])("tr",ve,[(Object(s["i"])(!0),Object(s["c"])(s["a"],null,Object(s["m"])(n.shifts,(function(e,n){return Object(s["i"])(),Object(s["c"])("td",{class:"shifts",key:n,onClick:t[3]||(t[3]=function(e){return o.selectdateshift(e)}),onMouseover:t[4]||(t[4]=function(){return o.hover&&o.hover.apply(o,arguments)}),onMouseout:t[5]||(t[5]=function(){return o.hoverout&&o.hoverout.apply(o,arguments)})},[Object(s["f"])(Object(s["o"])(e.name)+" ",1),we,Object(s["g"])("p",null,Object(s["o"])(e.starttime),1),Object(s["s"])(Object(s["g"])("p",null,"~",512),[[s["q"],""!=e.name]]),Object(s["g"])("p",null,Object(s["o"])(e.endtime),1)],32)})),128))])],64)})),_e={name:"cdays",props:["day","shifts"],emits:["update"],data:function(){return{nowdate:1}},methods:{hover:function(e){for(var t=0;t<=document.querySelectorAll(".days").length-1;t++)e.target!==document.querySelectorAll(".days")[t]&&e.target!==document.querySelectorAll(".shifts")[t]||""==document.querySelectorAll(".days")[t].innerHTML||(document.querySelectorAll(".days")[t].classList.add("hover"),document.querySelectorAll(".shifts")[t].classList.add("hover"))},hoverout:function(e){for(var t=0;t<=document.querySelectorAll(".days").length-1;t++)e.target!==document.querySelectorAll(".days")[t]&&e.target!==document.querySelectorAll(".shifts")[t]||""==document.querySelectorAll(".days")[t].innerHTML||(document.querySelectorAll(".days")[t].classList.remove("hover"),document.querySelectorAll(".shifts")[t].classList.remove("hover"))},selectdateshift:function(e){for(var t=document.querySelectorAll(".shifts").length,n=0;n<=t;n++)e.target===document.querySelectorAll(".shifts")[n]&&document.querySelectorAll(".days")[n].click()},selectdate:function(e){var t=this;""!=e&&(t.nowdate=e,t.updateclass())},nowindex:function(e){this.$emit("update",e)},updateclass:function(){for(var e=this,t=document.querySelectorAll(".days").length,n=0;n<=t-1;n++)document.querySelectorAll(".days")[n].classList.remove("nowday"),document.querySelectorAll(".shifts")[n].classList.remove("nowshift"),document.querySelectorAll(".days")[n].innerHTML==e.nowdate&&(e.nowindex(n),document.querySelectorAll(".days")[n].classList.add("nowday"),document.querySelectorAll(".shifts")[n].classList.add("nowshift"))},plusdate:function(e){var t=this;t.nowdate=e+1}},mounted:function(){var e=this;this.$bus.$on("nextcar",(function(t){e.plusdate(t)}))},updated:function(){var e=this;e.updateclass()}};n("d54f");_e.render=ke,_e.__scopeId="data-v-25a49c9a";var Se=_e,Ae={props:["haslogin"],data:function(){return{year:"",month:"",weeks:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],days_count:"",days:[[],[],[],[],[],[]],shifts:[[],[],[],[],[],[]],nowindex:"",guide:0}},components:{cdays:Se},methods:{updateguide:function(e){this.guide=e},iknow:function(){document.querySelector(".guide2").style.display="none",this.$bus.$emit("updateguide",0)},updateindex:function(e){var t=this;t.nowindex=e},prevMonth:function(){var e=this;e.month-=1,0===e.month&&(e.month=12,e.year-=1),e.updatecar()},nextMonth:function(){var e=this;e.month+=1,13===e.month&&(e.month=1,e.year+=1),e.updatecar()},updatecar:function(){var e=this;e.days=[[],[],[],[],[],[]],e.shifts=[[],[],[],[],[],[]],e.days_count=new Date(e.year,e.month,0).getDate();var t=new Date(e.year,e.month-1,1,0).toString(),n=t.slice(0,3);function s(){if("Sat"===n)var t=1;else{for(var s=1;s<=7;s++)if(e.days[0].push(s),7==e.days[0].length)break;var c=e.days[0][6]+1}if(t)for(var a=1;a<=7;a++)e.days[1].push(a);else for(var o=1;o<=7;o++)e.days[1].push(c),c++;for(var i=e.days[1][6]+1,l=1;l<=7;l++)e.days[2].push(i),i++;for(var r=e.days[2][6]+1,u=1;u<=7;u++)e.days[3].push(r),r++;for(var d=e.days[3][6]+1,f=1;f<=7;f++)d<=e.days_count?(e.days[4].push(d),d++):e.days[4].push("");var b=e.days[4][6]+1;1==b&&(b="");for(var g=1;g<=7;g++)""===b?e.days[5].push(b):b<=e.days_count?(e.days[5].push(b),b++):e.days[5].push("")}if("Sun"==n)s();else if("Mon"===n)e.days[0].push(""),s();else if("Tue"===n)e.days[0].push("",""),s();else if("Wed"===n)e.days[0].push("","",""),s();else if("Thu"===n)e.days[0].push("","","",""),s();else if("Fri"===n)e.days[0].push("","","","",""),s();else if("Sat"===n){for(var c=1;c<=7;c++)e.days[0].push("","","","","","");s()}for(var a={name:"",starttime:"",endtime:"",day:""},o=0;o<=e.days.length-1;o++)for(var i=1;i<=e.days[o].length;i++)e.shifts[o].push(a)},checkrow:function(){var e=this;function t(t){""===e.days[t][0]&&""===e.days[t][6]&&(e.days.splice(t,1),e.shifts.splice(t,1))}t(0),t(e.days.length-1)},tocar:function(e){var t,n=this;n.nowindex<=6?(n.shifts[0][n.nowindex]=e,t=n.days[0][n.nowindex%7],n.shifts[0][n.nowindex].day=t):n.nowindex<=13?(n.shifts[1][n.nowindex%7]=e,t=n.days[1][n.nowindex%7],n.shifts[1][n.nowindex%7].day=t):n.nowindex<=20?(n.shifts[2][n.nowindex%7]=e,t=n.days[2][n.nowindex%7],n.shifts[2][n.nowindex%7].day=t):n.nowindex<=27?(n.shifts[3][n.nowindex%7]=e,t=n.days[3][n.nowindex%7],n.shifts[3][n.nowindex%7].day=t):n.nowindex<=34?(n.shifts[4][n.nowindex%7]=e,t=n.days[4][n.nowindex%7],n.shifts[4][n.nowindex%7].day=t):n.nowindex<=41&&(n.shifts[5][n.nowindex%7]=e,t=n.days[5][n.nowindex%7],n.shifts[5][n.nowindex%7].day=t),this.$bus.$emit("nextcar",t),this.$emit("event",[this.year,this.month,this.days_count,this.shifts])},getevents:function(){var e=this,t={year:e.year,month:e.month};a.a.get("/api/getevents",{params:t}).then((function(t){if(0!=t.data){var n=JSON.parse(t.data.data);console.log(n),console.log(document.querySelectorAll(".days").length),console.log(document.querySelectorAll(".days")[1].innerHTML);for(var s=document.querySelectorAll(".days").length,c=0;c<=s-1;c++)for(var a=0;a<=n.length-1;a++){var o=parseInt(n[a].start.dateTime.slice(8,10));if(document.querySelectorAll(".days")[c].innerHTML==o){e.nowindex=c;var i={name:n[a].summary,endtime:n[a].end.dateTime.slice(11,16),starttime:n[a].start.dateTime.slice(11,16)};console.log(i),e.tocar(i)}}}else console.log("no")})).catch((function(e){console.log(e)}))},deleteshifts:function(){var e=this,t={year:e.year,month:e.month};a.a.get("/api/deleteevents",{params:t}).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}},watch:{shifts:function(){this.checkrow()}},created:function(){var e=this;(function(){var t=new Date;e.year=t.getFullYear();var n=t.getMonth();e.month=n+1,e.days_count=new Date(e.year,n+1,0).getDate()})()},mounted:function(){var e=this,t=this;(function(){var e=new Date,n=new Date(e.setDate(1)).toUTCString(),s=n.split(",")[0];function c(){for(var e=1;e<=7;e++)if(t.days[0].push(e),7==t.days[0].length)break;for(var n=t.days[0][6]+1,s=1;s<=7;s++)t.days[1].push(n),n++;for(var c=t.days[1][6]+1,a=1;a<=7;a++)t.days[2].push(c),c++;for(var o=t.days[2][6]+1,i=1;i<=7;i++)t.days[3].push(o),o++;for(var l=t.days[3][6]+1,r=1;r<=7;r++)l<=t.days_count?(t.days[4].push(l),l++):t.days[4].push("");var u=t.days[4][6]+1;if(1!=u)for(var d=1;d<=7;d++)u<=t.days_count?(t.days[5].push(u),u++):t.days[5].push("")}if("Sun"==s)c();else if("Mon"===s)t.days[0].push(""),c();else if("Tue"===s)t.days[0].push("",""),c();else if("Wed"===s)t.days[0].push("","",""),c();else if("Thu"===s)t.days[0].push("","","",""),c();else if("Fri"===s)t.days[0].push("","","","",""),c();else if("Sat"===s)for(var a=1;a<=7;a++)t.days[0].push(a),c();for(var o={name:"",starttime:"",endtime:"",day:""},i=0;i<=t.days.length-1;i++)for(var l=1;l<=t.days[i].length;l++)t.shifts[i].push(o);function r(e){""===t.days[e][0]&&""===t.days[e][6]&&(t.days.splice(e,1),t.shifts.splice(e,1))}r(0),r(5)})(),this.$bus.$on("shift",(function(t){e.tocar(t)})),this.$bus.$on("clearshift",(function(){for(var t=e,n=0;n<=t.shifts.length-1;n++)for(var s=0;s<=t.shifts[n].length-1;s++)t.shifts[n][s]={name:"",starttime:"",endtime:"",day:""};!0===e.$props.haslogin&&e.deleteshifts()})),this.$bus.$on("updateguide",(function(t){e.updateguide(t)}))},beforeUpdate:function(){!0===this.$props.haslogin&&this.getevents()}};n("c76a");Ae.render=me,Ae.__scopeId="data-v-d5cfd9c0";var qe=Ae,xe={class:"editbar"},Ce=Object(s["g"])("div",{class:"title"},[Object(s["g"])("h2",null,"班別管理")],-1),Ie=Object(s["g"])("thead",null,[Object(s["g"])("tr",null,[Object(s["g"])("td",null,"班別"),Object(s["g"])("td",null,"上班時間"),Object(s["g"])("td",null,"編輯/刪除")])],-1),$e={id:"tbody"},Te={class:"guide guide1"},Le=Object(s["g"])("span",{class:"arrow arrow_first"},"🡅",-1),Pe=Object(s["g"])("br",null,null,-1),ze=Object(s["f"])(" 點擊班別， "),Me=Object(s["g"])("br",null,null,-1),Ee=Object(s["f"])(" 可以新增到行事曆哦 ! "),Ue=Object(s["g"])("p",null,"知道了",-1),Be={key:0,class:"shift"},De={key:2,class:"times"},Ne={id:"starttime"},Ve=Object(s["f"])(" ~ "),Ge={id:"endtime"},Ke={key:3,class:"times"},He=Object(s["g"])("i",{class:"fas fa-check",style:{display:"none"}},null,-1),Fe=Object(s["g"])("i",{class:"fas fa-edit"},null,-1),Je=Object(s["g"])("i",{class:"fas fa-trash"},null,-1),Ze={class:"add"},Ye=Object(s["g"])("h3",null,"清空行事曆",-1),Re=Object(s["g"])("h3",null,"新增班別",-1),We=Object(s["g"])("div",{class:"title"},[Object(s["g"])("h3",null,"點擊班別到指定的日期")],-1),Qe={class:"shiftsbox"},Xe=Object(s["g"])("div",{class:"clear"},"清空行事曆",-1),et={class:"shiftname"},tt={class:"time"},nt={class:"edit"},st=Object(s["g"])("i",{class:"fas fa-times-circle"},null,-1),ct=Object(s["g"])("p",null,"關閉",-1),at=Object(s["g"])("i",{class:"fas fa-cog"},null,-1),ot=Object(s["g"])("p",null,"設定",-1),it={class:"editbar editmobileshift"},lt=Object(s["g"])("i",{class:"fas fa-arrow-alt-circle-down"},null,-1),rt=Object(s["g"])("div",{class:"title"},[Object(s["g"])("h2",null,"班別管理")],-1),ut=Object(s["g"])("thead",null,[Object(s["g"])("tr",null,[Object(s["g"])("td",null,"班別"),Object(s["g"])("td",null,"上班時間"),Object(s["g"])("td",null,"刪除")])],-1),dt={id:"tbody"},ft={class:"shift"},bt={class:"times"},gt=Object(s["f"])(" ~ "),pt=Object(s["g"])("i",{class:"fas fa-trash"},null,-1),ht={class:"add"},jt=Object(s["g"])("h3",null,"新增班別",-1);function mt(e,t,n,c,a,o){return Object(s["i"])(),Object(s["c"])(s["a"],null,[Object(s["g"])("div",xe,[Ce,Object(s["g"])("table",null,[Ie,Object(s["g"])("tbody",$e,[(Object(s["i"])(!0),Object(s["c"])(s["a"],null,Object(s["m"])(a.shifts,(function(e,c){return Object(s["i"])(),Object(s["c"])("tr",{key:c},[Object(s["s"])(Object(s["g"])("div",Te,[Le,Pe,ze,Me,Ee,Object(s["g"])("button",{class:"btn",onClick:t[1]||(t[1]=function(){return o.iknow&&o.iknow.apply(o,arguments)})},[Ue])],512),[[s["q"],!1===n.haslogin&&1===n.guide]]),a.editname===c?(Object(s["i"])(),Object(s["c"])("td",Be,[Object(s["s"])(Object(s["g"])("input",{type:"text","onUpdate:modelValue":function(t){return e.name=t},class:"shift shift_text"},null,8,["onUpdate:modelValue"]),[[s["p"],e.name]])])):a.editname!=c?(Object(s["i"])(),Object(s["c"])("td",{key:1,class:"shift shiftshow",onClick:function(t){return o.addcar(e.name,e.starttime,e.endtime)}},Object(s["o"])(e.name),9,["onClick"])):Object(s["d"])("",!0),a.editname===c?(Object(s["i"])(),Object(s["c"])("td",De,[Object(s["g"])("select",Ne,[(Object(s["i"])(!0),Object(s["c"])(s["a"],null,Object(s["m"])(a.timearr,(function(t,n){return Object(s["i"])(),Object(s["c"])("option",{key:n,value:t,selected:e.starttime==t},Object(s["o"])(t),9,["value","selected"])})),128))]),Ve,Object(s["g"])("select",Ge,[(Object(s["i"])(!0),Object(s["c"])(s["a"],null,Object(s["m"])(a.timearr,(function(t,n){return Object(s["i"])(),Object(s["c"])("option",{key:n,value:t,selected:e.endtime==t},Object(s["o"])(t),9,["value","selected"])})),128))])])):a.editname!=c?(Object(s["i"])(),Object(s["c"])("td",Ke,Object(s["o"])(e.starttime)+" ~ "+Object(s["o"])(e.endtime),1)):Object(s["d"])("",!0),Object(s["g"])("td",{class:"icon",onClickCapture:function(e){return o.edit(e,c)}},[He,Fe,Je],40,["onClickCapture"])])})),128))])]),Object(s["g"])("div",Ze,[Object(s["g"])("button",{onClick:t[2]||(t[2]=function(){return o.clear&&o.clear.apply(o,arguments)}),class:"clear"},[Ye]),Object(s["g"])("button",{onClick:t[3]||(t[3]=function(){return o.add&&o.add.apply(o,arguments)}),class:"addbtn"},[Re])])]),Object(s["g"])("div",{class:["mobileeditbar",{transition:n.mobileedit}]},[We,Object(s["g"])("div",Qe,[Object(s["g"])("div",{class:"shift",onClick:t[4]||(t[4]=function(){return o.clear&&o.clear.apply(o,arguments)})},[Xe]),(Object(s["i"])(!0),Object(s["c"])(s["a"],null,Object(s["m"])(a.shifts,(function(e,t){return Object(s["i"])(),Object(s["c"])("div",{key:t,class:"shift",onClick:function(t){return o.addcar(e.name,e.starttime,e.endtime)}},[Object(s["g"])("div",et,Object(s["o"])(e.name),1),Object(s["g"])("div",tt,Object(s["o"])(e.starttime)+"~"+Object(s["o"])(e.endtime),1)],8,["onClick"])})),128))]),Object(s["g"])("div",nt,[Object(s["g"])("div",{class:"editbtn",onClick:t[5]||(t[5]=function(){return o.closeedit&&o.closeedit.apply(o,arguments)})},[st,ct]),Object(s["g"])("div",{class:"editbtn",onClick:t[6]||(t[6]=function(){return o.opensetting&&o.opensetting.apply(o,arguments)})},[at,ot])])],2),Object(s["g"])("div",it,[Object(s["g"])("div",{class:"close",onClick:t[7]||(t[7]=function(){return o.closeeditbar&&o.closeeditbar.apply(o,arguments)})},[lt]),rt,Object(s["g"])("table",null,[ut,Object(s["g"])("tbody",dt,[(Object(s["i"])(!0),Object(s["c"])(s["a"],null,Object(s["m"])(a.shifts,(function(e,t){return Object(s["i"])(),Object(s["c"])("tr",{key:t},[Object(s["g"])("td",ft,[Object(s["s"])(Object(s["g"])("input",{type:"text","onUpdate:modelValue":function(t){return e.name=t},class:"shift shift_text",onChange:function(e){return o.updateshiftlist(t)}},null,40,["onUpdate:modelValue","onChange"]),[[s["p"],e.name]])]),Object(s["g"])("td",bt,[Object(s["g"])("select",{class:"starttime",onChange:function(e){return o.editshift(t)}},[(Object(s["i"])(!0),Object(s["c"])(s["a"],null,Object(s["m"])(a.timearr,(function(t,n){return Object(s["i"])(),Object(s["c"])("option",{key:n,value:t,selected:e.starttime==t},Object(s["o"])(t),9,["value","selected"])})),128))],40,["onChange"]),gt,Object(s["g"])("select",{class:"endtime",onChange:function(e){return o.editshift(t)}},[(Object(s["i"])(!0),Object(s["c"])(s["a"],null,Object(s["m"])(a.timearr,(function(t,n){return Object(s["i"])(),Object(s["c"])("option",{key:n,value:t,selected:e.endtime==t},Object(s["o"])(t),9,["value","selected"])})),128))],40,["onChange"])]),Object(s["g"])("td",{class:"icon",onClickCapture:function(e){return o.trash(t)}},[pt],40,["onClickCapture"])])})),128))])]),Object(s["g"])("div",ht,[Object(s["g"])("button",{onClick:t[8]||(t[8]=function(){return o.add&&o.add.apply(o,arguments)}),class:"addbtn"},[jt])])])],64)}var Ot=n("c1df"),yt=n.n(Ot),vt={name:"editbar",props:["guide","mobileedit","haslogin"],emit:["updateguide"],data:function(){return{shifts:[],editname:"default",timearr:[]}},watch:{haslogin:function(){var e=this;!0===e.haslogin?e.getshiftlist():e.shifts=[{name:"A",starttime:"00:00",endtime:"12:00"}]}},methods:{trash:function(e){this.deleteshiftlist(e),this.shifts.splice(e,1)},editshift:function(e){var t=this;t.shifts[e].starttime=document.querySelectorAll(".starttime")[e].value,t.shifts[e].endtime=document.querySelectorAll(".endtime")[e].value,t.updateshiftlist(e)},closeeditbar:function(){document.querySelector(".editmobileshift").classList.remove("transition")},opensetting:function(){document.querySelector(".editmobileshift").classList.add("transition")},closeedit:function(){this.$emit("updateedit",!1)},iknow:function(){1===this.$props.guide&&(document.querySelector(".guide1").style.display="none",this.$emit("updateguide",2),document.querySelector("#tbody").style.overflow="auto")},clear:function(){this.$bus.$emit("clearshift")},add:function(){var e=this;e.iknow();var t,n=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];if(0===e.shifts.length)t="A";else for(var s=0;s<=n.length-1;s++){var c=e.shifts.length-1;if(e.shifts[c].name===n[s]){t=n[s+1];break}if("Z"===n[s+1]){t="A";break}e.shifts[c].name!=n[s]&&(t="A")}var a={name:t,starttime:"00:00",endtime:"12:00"};e.shifts.push(a),!0===this.haslogin&&e.uploadshifts()},uploadshifts:function(){var e=this,t=JSON.stringify(e.shifts);a.a.get("/api/uploadshiftlist",{params:t}).then((function(t){console.log(t.data.id),e.shifts[e.shifts.length-1].id=t.data.id})).catch((function(e){console.log(e)}))},addcar:function(e,t,n){var s={name:e,starttime:t,endtime:n,day:""};this.$bus.$emit("shift",s),this.iknow()},edit:function(e,t){for(var n=this,s=document.querySelectorAll(".fa-check").length,c=0;c<=s-1;c++)document.querySelectorAll(".fa-check")[c].style.display="none",document.querySelectorAll(".fa-edit")[c].style.display="block";var a=e.currentTarget.querySelectorAll("svg")[1],o=e.currentTarget.querySelectorAll("path")[1],i=e.currentTarget.querySelectorAll("svg")[2],l=e.currentTarget.querySelectorAll("path")[2],r=e.currentTarget.querySelectorAll("svg")[0],u=e.currentTarget.querySelectorAll("path")[0];e.target==a||e.target==o?(r.style.display="block",a.style.display="none",n.editname=t):e.target==i||e.target==l?(!0===this.haslogin&&n.deleteshiftlist(t),n.shifts.splice(t,1)):e.target!=r&&e.target!=u||(n.shifts[t].starttime=document.getElementById("starttime").value,n.shifts[t].endtime=document.getElementById("endtime").value,r.style.display="none",a.style.display="block",n.editname="default",!0===this.haslogin&&n.updateshiftlist(t))},getshiftlist:function(){var e=this;a.a.get("/api/getshiftlist").then((function(t){console.log(t.data),e.shifts=t.data})).catch((function(e){console.log(e)}))},deleteshiftlist:function(e){a.a.get("/api/deleteshiftlist",{params:this.shifts[e]}).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))},updateshiftlist:function(e){console.log(this.shifts[e]),a.a.get("/api/updateshiftlist",{params:this.shifts[e]}).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}},mounted:function(){for(var e=this,t=[],n=0;n<=23;n++){var s=void 0;s=n<=9?"0"+n:n;for(var c=1;c<=2;c++){var a=void 0;a=1===c?"00":"30";var o=Ot().format("".concat(s,":").concat(a));t.push(o)}}e.timearr=t}};n("56c0");vt.render=mt;var wt=vt,kt={name:"App",data:function(){return{haslogin:"",username:null,guide:1,events:[],days_count:"",upload:!1,googlelogin:!1,mobileedit:!1,googleAPI:{CLIENT_ID:"280793763874-hm3kggc61gqs775vo6sklk8mihqoj28b.apps.googleusercontent.com",API_KEY:"AIzaSyAR30nDKLsSwbZKBXyi4QSCr2PxplRtmug"},authParams:{response_type:"token",client_id:"280793763874-hm3kggc61gqs775vo6sklk8mihqoj28b.apps.googleusercontent.com",immediate:!1,scope:["https://www.googleapis.com/auth/calendar","https://www.googleapis.com/auth/calendar.events","https://www.googleapis.com/auth/userinfo.email"]}}},components:{myheader:oe,calendar:qe,editbar:wt},methods:{closeedit:function(e){this.mobileedit=e},manage:function(){this.mobileedit=!0},getguidenum:function(e){this.guide=e,this.$bus.$emit("updateguide",e)},updateevent:function(e){this.events=[];var t,n=e[0];t=1==e[1].toString().length?"0"+e[1]:e[1],this.days_count=e[2];for(var s=[],c=e[3],a=0;a<=c.length-1;a++)for(var o=0;o<=c[a].length-1;o++)if(""!=c[a][o].day){var i=void 0;i=1==c[a][o].day.toString().length?"0"+c[a][o].day:c[a][o].day;var l=c[a][o].starttime,r=c[a][o].endtime,u=void 0,d=void 0;u=l>r?c[a][o].day+1:c[a][o].day,d=1==u.toString().length?"0"+u:u;var f={summary:c[a][o].name,start:{dateTime:"".concat(n,"-").concat(t,"-").concat(i,"T").concat(l,":00+08:00")},end:{dateTime:"".concat(n,"-").concat(t,"-").concat(d,"T").concat(r,":00+08:00")}};s.push(f)}this.events=s},execute:function(){var e=this;if(0!=this.events.length){document.getElementById("addButton").style.display="none",this.upload=!0;var t=window.gapi,n=t.client.newBatch();this.events.map((function(s,c){n.add(t.client.calendar.events.insert({calendarId:"primary",resource:e.events[c]}))})),n.then((function(t){console.log(t),document.getElementById("sucess_pop").classList.add("on"),console.log("all jobs now dynamically done!!!"),e.upload=3}))}else alert("行事曆沒有資料!")},eventsToBackend:function(){var e=this.events[0].start.dateTime.split("-")[0],t=this.events[0].start.dateTime.split("-")[1],n={year:e,month:t,events:JSON.stringify(this.events)};a.a.get("/api/events",{params:n}).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))},getsession:function(){var e=this;a.a.get("/api/session").then((function(t){null!==t.data.id?(e.haslogin=!0,e.username=t.data.user):e.haslogin=!1})).catch((function(e){console.log(e)}))},close:function(){document.getElementById("sucess_pop").classList.remove("on")},opensignup:function(){var e={pop:!0,pop_card:"signup"};this.$bus.$emit("opensignup",e),document.getElementById("sucess_pop").classList.remove("on")},openlogin:function(){var e={pop:!0,pop_card:"login"};this.$bus.$emit("openlogin",e),document.getElementById("sucess_pop").classList.remove("on")}},watch:{events:function(){!0===this.haslogin&&this.eventsToBackend()}},created:function(){this.getsession()},mounted:function(){var e=this,t=this.googleAPI.CLIENT_ID,n=this.googleAPI.API_KEY,s=window.gapi;function c(e){e&&e["access_token"]&&(s.auth.setToken(e),a())}function a(){return s.client.setApiKey(n),s.client.load("https://content.googleapis.com/discovery/v1/apis/calendar/v3/rest").then((function(){console.log("GAPI client loaded for API"),document.getElementById("addButton").click()}),(function(e){console.error("Error loading GAPI client for API",e)}))}s.load("client:auth2",(function(){s.auth2.init({client_id:t})})),document.getElementById("authButton").onclick=function(){s.auth.authorize(e.authParams,c)}}};n("f4b9");kt.render=O;var _t=kt,St=n("5502"),At=Object(St["a"])({state:{},mutations:{},actions:{},modules:{}}),qt=n("14b7"),xt={},Ct=Object(qt["a"])();xt.$on=Ct.on,xt.$off=Ct.off,xt.$emit=Ct.emit;var It=xt,$t=(n("15f5"),n("7051"),Object(s["b"])(_t));$t.config.globalProperties.$bus=It,$t.config.devtools=!0,$t.use(At,a.a,yt.a).mount("#app")},6:function(e,t){},7:function(e,t){},8:function(e,t){},9:function(e,t){},ac64:function(e,t,n){},b758:function(e,t,n){},c76a:function(e,t,n){"use strict";n("3243")},d4c7:function(e,t,n){"use strict";n("0fad")},d54f:function(e,t,n){"use strict";n("b758")},f4b9:function(e,t,n){"use strict";n("ac64")}});
//# sourceMappingURL=app.600f9d9d.js.map